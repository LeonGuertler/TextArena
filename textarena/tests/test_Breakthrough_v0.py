import textarena as ta

env_id = 'Breakthrough-v0'
predefined_actions = [
    '[g2g3]',
    '[c7c6]',
    '[f2f3]',
    '[a7a6]',
    '[g1g2]',
    '[a8a7]',
    '[g3g4]',
    '[g7g6]',
    '[g4g5]',
    '[c6c5]',
    '[f1f2]',
    '[e7e6]',
    '[e2e3]',
    '[f7f6]',
    '[g2g3]',
    '[f8f7]',
    '[d2d3]',
    '[d7d6]',
    '[g3g4]',
    '[g8g7]',
    '[a2a3]',
    '[h7h6]',
    '[g5f6]',
    '[d6d5]',
    '[g4g5]',
    '[c8c7]',
    '[b2b3]',
    '[c5c4]',
    '[d3c4]',
    '[e6e5]',
    '[h2h3]',
    '[b7b6]',
    '[g5h6]',
    '[h8h7]',
    '[d1d2]',
    '[b8b7]',
    '[b3b4]',
    '[g7h6]',
    '[b4b5]',
    '[d5d4]',
    '[h1h2]',
    '[d4d3]',
    '[b1b2]',
    '[e5e4]',
    '[c4c5]',
    '[h6h5]',
    '[c2c3]',
    '[a6b5]',
    '[h3h4]',
    '[g6g5]',
    '[h4g5]',
    '[e8e7]',
    '[h2h3]',
    '[b6c5]',
    '[a1a2]',
    '[h5h4]',
    '[a3a4]',
    '[e4f3]',
    '[c1c2]',
    '[b5a4]',
    '[a2a3]',
    '[e7f6]',
    '[b2b3]',
    '[c5c4]',
    '[e1e2]',
    '[h7h6]',
    '[b3a4]',
    '[d8d7]',
    '[a4a5]',
    '[b7b6]',
    '[c2d3]',
    '[h6h5]',
    '[g5f6]',
    '[c4d3]',
    '[e2f3]',
    '[a7a6]',
    '[a5b6]',
    '[d7d6]',
    '[a3a4]',
    '[d6d5]',
    '[e3e4]',
    '[c7c6]',
    '[b6b7]',
    '[a6a5]',
    '[f3f4]',
    '[d5e4]',
    '[f4f5]',
    '[e4e3]',
    '[f2e3]',
    '[c6c5]',
    '[e3e4]',
    '[c5c4]',
]

env = ta.make(env_id=env_id)
env.reset(num_players=2)

for istep, action in enumerate(predefined_actions):
    done, _ = env.step(action=action)
    if istep == len(predefined_actions) - 1:
        assert done, 'Game must end after the last move.'
    else:
        assert not done, 'Game must not yet end before the last move.'

print(f'{env_id=} test done successfully.')
